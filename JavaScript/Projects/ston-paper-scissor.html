<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play with system</title>
    <style>
        *{
            text-transform: capitalize;
            text-align: center;
            border: none;
         }
         button{
            border-radius: 50%;
            border: 20px solid lightgreen;
            background-color: lightgreen;
         }
        .game{
            height: 40vh;
            width: 20vw;
           border-radius: 50%;
        }
    
    </style>
</head>
<body>
    <h1>ston paper scissor game</h1>
    <button  id="stone" onclick="mychoice='stone'; val=1;
    showMatch()"> <img src="rock.png" alt="Stone" class="game"></button>

    <button id="paper" onclick="mychoice='paper'; val=1;
    showMatch()"><img src="paper-200x187.png" alt="Paper" class="game"></button>

    <button id="scissor" onclick="mychoice='scissor';val=1; 
    showMatch()"><img src="scissors.png" alt="Scissor" class="game"></button>

    <br> <br>
    <button id="result" onclick="val=2;showMatch();">show total score</button>
    <button id="reset" onclick="localStorage.removeItem('Score');
    score={
        win:0,
        loss:0,
        Tie:0,
        match:0
    }
    val=2;
    showMatch()">reset</button>
    <h3 id="usermove"></h3>
    <h3 id="computerMove"></h3>
    <h3 id="matchresult"></h3>
    <h3 id="score"></h3>


    <script>
        let mychoice;
        let computer_choice;
        
        let scorestr=localStorage.getItem('Score');
        let score= JSON.parse(scorestr) || {   win:0,
            loss:0,
            Tie:0,
            match:0 
        };
        
        function display() {
            localStorage.setItem('Score',JSON.stringify(score));
            return `Win: ${score.win}
            Loss: ${score.loss}
            Tie: ${score.Tie}
            Total Matches: ${score.match}`
            
        }
    
        function choice() {
            let random_number=Math.round(Math.random()*3); 
            if(random_number==1){
                computer_choice='stone';
            } else if(random_number==2) {
                computer_choice='paper';
            } else {
            computer_choice='scissor';
            }
        }
        function decision(mychoice) {

            score.match++;
            if((computer_choice =='paper' && mychoice =='scissor') || (computer_choice=='stone' && mychoice=='paper') || (computer_choice=='scissor' && mychoice=='stone')) {
                score.win++;
                return `You have Won`;
                
             } 
            else if((computer_choice=='stone' && mychoice=='scissor') || (computer_choice=='paper' && mychoice=='stone') || (computer_choice=='scissor' && mychoice=='paper')) {
                score.loss++;
                return `You have lost`;
                
             }
            else {
                score.Tie++;
                return `Match has drawn`;
             }
        }
        let val;
        function showMatch() {
            if(val!=2) {
                choice();
                document.querySelector('#usermove').innerText = `Your choice is ${mychoice}`;
                document.querySelector('#computerMove').innerText = `Computer choice is ${computer_choice}`;
                document.querySelector('#matchresult').innerText=`${decision(mychoice)}`;
                document.querySelector('#score').innerText=`${display()}`;
            }
            else {
                document.querySelector('#usermove').innerText = ``;
                document.querySelector('#computerMove').innerText = ``;
                document.querySelector('#matchresult').innerText=``;
                document.querySelector('#score').innerText=`${display()}`;
            }
            
        }
    </script>
</body>
</html>